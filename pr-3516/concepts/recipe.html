

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Conda build recipes &mdash; conda build 3.18.0+3.gcc639bc.dirty documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Package naming conventions" href="package-naming-conv.html" />
    <link rel="prev" title="Channels and generating an index" href="generating-index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> conda build
          

          
          </a>

          
            
            
              <div class="version">
                3.18.0+3.gcc639bc.dirty
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install-conda-build.html">Installing and updating conda build</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Concepts</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="channels.html">Conda channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="generating-index.html">Channels and generating an index</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Conda build recipes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#conda-build-process">Conda build process</a></li>
<li class="toctree-l3"><a class="reference internal" href="#more-information">More information</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="package-naming-conv.html">Package naming conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#what-is-a-package">What is a “package”?</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#what-about-channels">What about channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#building-anaconda-installers">Building Anaconda installers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../user-guide/index.html">User guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/index.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">Release notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">conda build</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Concepts</a> &raquo;</li>
        
      <li>Conda build recipes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="conda-build-recipes">
<h1>Conda build recipes<a class="headerlink" href="#conda-build-recipes" title="Permalink to this headline">¶</a></h1>
<p>To enable building <a class="reference external" href="https://conda.io/projects/conda/en/latest/user-guide/concepts/packages.html">conda packages</a>, <a class="reference internal" href="../install-conda-build.html#install-conda-build"><span class="std std-ref">install and update conda
and conda build</span></a>.</p>
<p>Building a conda package requires a recipe. A conda build recipe
is a flat directory that contains the following files:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">meta.yaml</span></code>---A file that contains all the metadata in the
recipe. Only <code class="docutils literal notranslate"><span class="pre">package/name</span></code> and <code class="docutils literal notranslate"><span class="pre">package/version</span></code> are
required.</li>
<li><code class="docutils literal notranslate"><span class="pre">build.sh</span></code>---The script that installs the files for the
package on macOS and Linux. It is executed using the <code class="docutils literal notranslate"><span class="pre">bash</span></code>
command.</li>
<li><code class="docutils literal notranslate"><span class="pre">bld.bat</span></code>---The build script that installs the files for the
package on Windows. It is executed using <code class="docutils literal notranslate"><span class="pre">cmd</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">run_test.[py,pl,sh,bat]</span></code>---An optional Python test file, a
test script that runs automatically if it is part of the recipe.</li>
<li>Optional patches that are applied to the source.</li>
<li>Other resources that are not included in the source and cannot
be generated by the build scripts. Examples are icon files,
readme files and build notes.</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">When you use the <cite>conda skeleton &lt;skeleton_ref&gt;</cite> command,
the first 3 files---<code class="docutils literal notranslate"><span class="pre">meta.yaml</span></code>, <code class="docutils literal notranslate"><span class="pre">build.sh</span></code>, and
<code class="docutils literal notranslate"><span class="pre">bld.bat</span></code>---are automatically generated for you.</p>
</div>
<div class="section" id="conda-build-process">
<h2>Conda build process<a class="headerlink" href="#conda-build-process" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">conda-build</span></code> performs the following steps:</p>
<ol class="arabic simple">
<li>Reads the metadata.</li>
<li>Downloads the source into a cache.</li>
<li>Extracts the source into the source directory.</li>
<li>Applies any patches.</li>
<li>Re-evaluates the metadata, if source is necessary to fill any
metadata values.</li>
<li>Creates a build environment and then installs the build
dependencies there.</li>
<li>Runs the build script. The current working directory is the
source directory with environment variables set. The build
script installs into the build environment.</li>
<li>Performs some necessary post-processing steps, such as shebang
and rpath.</li>
<li>Creates a conda package containing all the files in the build
environment that are new from step 5, along with the necessary
conda package metadata.</li>
<li>Tests the new conda package if the recipe includes tests:<ol class="arabic">
<li>Deletes the build environment.</li>
<li>Creates a test environment with the package and its
dependencies.</li>
<li>Runs the test scripts.</li>
</ol>
</li>
</ol>
<p>The <a class="reference external" href="https://github.com/continuumio/conda-recipes">conda-recipes</a> repo
contains example recipes for many conda packages.</p>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">All recipe files, including <code class="docutils literal notranslate"><span class="pre">meta.yaml</span></code> and build
scripts, are included in the final package archive that is
distributed to users. Be careful not to put sensitive information
such as passwords into recipes where it could be made public.</p>
</div>
<p>The <cite>conda skeleton &lt;skeleton_ref&gt;</cite> command can help to make
skeleton recipes for common repositories, such as <a class="reference external" href="https://pypi.python.org/pypi">PyPI</a>.</p>
</div>
<div class="section" id="more-information">
<h2>More information<a class="headerlink" href="#more-information" title="Permalink to this headline">¶</a></h2>
<p>Review <a class="reference internal" href="../resources/define-metadata.html"><span class="doc">Defining metadata (meta.yaml)</span></a> to see a breakdown of the
components of a recipe, including:</p>
<blockquote>
<div><ul class="simple">
<li>package name</li>
<li>package version</li>
<li>descriptive metadata</li>
<li>where to obtain source code</li>
<li>how to test the package</li>
</ul>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="package-naming-conv.html" class="btn btn-neutral float-right" title="Package naming conventions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="generating-index.html" class="btn btn-neutral float-left" title="Channels and generating an index" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Anaconda, Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>